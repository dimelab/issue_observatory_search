<!--
    Skeleton Loader Components

    Displays loading placeholders while content loads

    Types:
    - Text skeleton: For text content
    - Card skeleton: For card layouts
    - Table skeleton: For data tables
    - List skeleton: For list items

    Usage:
        {% include 'components/skeleton.html' with skeleton_type='card', count=3 %}
-->

{% macro skeleton_text(lines=3, class='') %}
<div class="animate-pulse space-y-3 {{ class }}">
    {% for i in range(lines) %}
    <div class="h-4 bg-gray-200 rounded
        {% if loop.last and lines > 1 %}w-3/4{% else %}w-full{% endif %}">
    </div>
    {% endfor %}
</div>
{% endmacro %}

{% macro skeleton_card(class='') %}
<div class="bg-white rounded-lg border border-gray-200 p-6 {{ class }}">
    <div class="animate-pulse space-y-4">
        <!-- Header -->
        <div class="flex items-center space-x-4">
            <div class="rounded-full bg-gray-200 h-12 w-12"></div>
            <div class="flex-1 space-y-2">
                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                <div class="h-3 bg-gray-200 rounded w-1/2"></div>
            </div>
        </div>

        <!-- Content -->
        <div class="space-y-2">
            <div class="h-3 bg-gray-200 rounded"></div>
            <div class="h-3 bg-gray-200 rounded"></div>
            <div class="h-3 bg-gray-200 rounded w-5/6"></div>
        </div>

        <!-- Footer -->
        <div class="flex space-x-2">
            <div class="h-8 bg-gray-200 rounded w-20"></div>
            <div class="h-8 bg-gray-200 rounded w-20"></div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro skeleton_table(rows=5, columns=4, class='') %}
<div class="bg-white rounded-lg border border-gray-200 overflow-hidden {{ class }}">
    <div class="animate-pulse">
        <!-- Table Header -->
        <div class="bg-gray-50 border-b border-gray-200 p-4">
            <div class="grid grid-cols-{{ columns }} gap-4">
                {% for i in range(columns) %}
                <div class="h-4 bg-gray-200 rounded"></div>
                {% endfor %}
            </div>
        </div>

        <!-- Table Rows -->
        <div class="divide-y divide-gray-200">
            {% for i in range(rows) %}
            <div class="p-4">
                <div class="grid grid-cols-{{ columns }} gap-4">
                    {% for j in range(columns) %}
                    <div class="h-4 bg-gray-200 rounded"></div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endmacro %}

{% macro skeleton_list(items=5, class='') %}
<div class="bg-white rounded-lg border border-gray-200 divide-y divide-gray-200 {{ class }}">
    {% for i in range(items) %}
    <div class="p-4">
        <div class="animate-pulse flex items-center space-x-4">
            <div class="rounded-md bg-gray-200 h-16 w-16 flex-shrink-0"></div>
            <div class="flex-1 space-y-2">
                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                <div class="flex space-x-2 mt-2">
                    <div class="h-6 bg-gray-200 rounded w-16"></div>
                    <div class="h-6 bg-gray-200 rounded w-16"></div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endmacro %}

{% macro skeleton_network_card(class='') %}
<div class="bg-white rounded-lg border border-gray-200 overflow-hidden {{ class }}">
    <div class="animate-pulse">
        <!-- Network Preview -->
        <div class="h-48 bg-gray-200"></div>

        <!-- Content -->
        <div class="p-4 space-y-3">
            <div class="h-5 bg-gray-200 rounded w-2/3"></div>
            <div class="flex space-x-4">
                <div class="h-3 bg-gray-200 rounded w-20"></div>
                <div class="h-3 bg-gray-200 rounded w-20"></div>
                <div class="h-3 bg-gray-200 rounded w-20"></div>
            </div>
            <div class="flex space-x-2 pt-2">
                <div class="h-8 bg-gray-200 rounded flex-1"></div>
                <div class="h-8 bg-gray-200 rounded flex-1"></div>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro skeleton_stat_card(class='') %}
<div class="bg-white rounded-lg border border-gray-200 p-6 {{ class }}">
    <div class="animate-pulse flex items-center">
        <div class="flex-shrink-0 bg-gray-200 rounded-md h-12 w-12"></div>
        <div class="ml-4 flex-1 space-y-2">
            <div class="h-3 bg-gray-200 rounded w-1/2"></div>
            <div class="h-6 bg-gray-200 rounded w-3/4"></div>
        </div>
    </div>
</div>
{% endmacro %}

<!-- Full Page Loading Skeleton -->
{% macro skeleton_page(type='dashboard') %}
<div class="space-y-6">
    {% if type == 'dashboard' %}
    <!-- Header -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="animate-pulse space-y-3">
            <div class="h-8 bg-gray-200 rounded w-1/3"></div>
            <div class="h-4 bg-gray-200 rounded w-1/4"></div>
        </div>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {{ skeleton_stat_card() }}
        {{ skeleton_stat_card() }}
        {{ skeleton_stat_card() }}
    </div>

    <!-- Content -->
    <div class="bg-white rounded-lg shadow-md">
        {{ skeleton_table(rows=8, columns=5) }}
    </div>

    {% elif type == 'network' %}
    <!-- Network Visualization -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="animate-pulse">
            <div class="h-96 bg-gray-200 rounded"></div>
        </div>
    </div>

    {% elif type == 'list' %}
    <!-- List View -->
    <div class="bg-white rounded-lg shadow-md">
        {{ skeleton_list(items=8) }}
    </div>

    {% else %}
    <!-- Generic -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="animate-pulse space-y-4">
            <div class="h-6 bg-gray-200 rounded w-1/3"></div>
            <div class="space-y-2">
                <div class="h-4 bg-gray-200 rounded"></div>
                <div class="h-4 bg-gray-200 rounded"></div>
                <div class="h-4 bg-gray-200 rounded w-5/6"></div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endmacro %}

<!-- Inline Skeleton for HTMX Loading States -->
{% macro skeleton_inline(type='text', class='') %}
<div class="animate-pulse {{ class }}">
    {% if type == 'text' %}
    <div class="h-4 bg-gray-200 rounded w-full"></div>
    {% elif type == 'button' %}
    <div class="h-10 bg-gray-200 rounded w-24"></div>
    {% elif type == 'avatar' %}
    <div class="h-10 w-10 bg-gray-200 rounded-full"></div>
    {% elif type == 'badge' %}
    <div class="h-6 bg-gray-200 rounded-full w-16"></div>
    {% else %}
    <div class="h-4 bg-gray-200 rounded"></div>
    {% endif %}
</div>
{% endmacro %}
